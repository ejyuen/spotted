<!--
Spotted Favorites Page
-->
<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8">
<title>spotted</title>

<!-- Load style sheets -->
<link rel="stylesheet" href=
  "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.css">

<link rel="stylesheet" href="mainLayout.css">

<!-- Use mobile-aware viewport -->
<meta name="viewport" content=
  "width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Load any supplemental Javascript libraries here -->
<script src=
  "https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</script>

<script>

// A short jQuery extension to read query parameters from the URL.
$.extend({
  getUrlVars: function() {
    var vars = [], pair;
    var pairs = window.location.search.substr(1).split('&');
    for (var i = 0; i < pairs.length; i++) {
      pair = pairs[i].split('=');
      vars.push(pair[0]);
      vars[pair[0]] = pair[1] &&
          decodeURIComponent(pair[1].replace(/\+/g, ' '));
    }
    return vars;
  },
  getUrlVar: function(name) {
    return $.getUrlVars()[name];
  }
});
// $.getUrlVar('size')

// all the pets and their properties
var benjamin = {
  name: "Benjamin",
  gender: "Male",
  age: "8 months",
  breed: "Maltese",
  activity: "+++",
  kids: "+++",
  shedding: "++",
  vaccinations: "yes",
  neutered: "yes",
  images: ["../images/benjamin_1.jpg","../images/benjamin_2.jpg","../images/benjamin_3.jpg","../images/benjamin_4.jpg","../images/benjamin_5.jpg"]
};

var staples = {
  name: "Staples",
  gender: "Male",
  age: "4 months",
  breed: "Chihuahua",
  activity: "++",
  kids: "+",
  shedding: "+",
  vaccinations: "yes",
  neutered: "yes",
  images: ["../images/staples_1.jpg","../images/staples_2.jpg","../images/staples_3.jpg","../images/staples_4.jpg"]
};

var ping = {
  name: "Ping",
  gender: "Female",
  age: "9 months",
  breed: "Siamese",
  activity: "+++++",
  kids: "++++",
  shedding: "++",
  vaccinations: "yes",
  neutered: "yes",
  images: ["../images/ping_1.jpg","../images/ping_2.jpg","../images/ping_3.jpg","../images/ping_4.jpg"]
};

var pet_dict = [ping,staples,benjamin];
var pet_removed = "";
var pet_show = ["ping","staples","benjamin"];
$(document).ready(function(){
  var add_pets="";
  for (var i=0; i< pet_dict.length; i++) {
    var pet=pet_dict[i];

    var slideshow = "<div class='slideshow-container'>";
    for (var j=0; j<pet.images.length; j++){
      var slide = "<div class='pet-slide' id='slide-"+pet.name.toLowerCase()+"-"+j+"'><img class='slide' src='"+pet.images[j]+"'></div>";
      slideshow+=slide;
    }

    slideshow+="<a class='prev' onclick='plusSlides("+pet.name.toLowerCase()+",-1)'>&#10094;</a>";
    slideshow+="<a class='next' onclick='plusSlides("+pet.name.toLowerCase()+",1)'>&#10095;</a>";
    slideshow+="</div><br><div style='text-align:center'>";
    for (var k=0; k<pet.images.length; k++){
      var cur_dot = k+1;
      slideshow+="<span class='dot' id='dot-"+pet.name.toLowerCase()+"-"+k+"'onclick='currentSlide(";
      slideshow+=cur_dot;
      slideshow+=")'></span>";
    }
    slideshow+="</div>";

    var add="<div id=pet-"+pet.name.toLowerCase()+" class='pet'><div><div>"+"<input id='close-"+pet.name.toLowerCase()+"' type='button' class='btn remove' value='X'/></div>"
                                    +slideshow+"<div>"
                                    +pet.name+"</div><div>"
                                    +pet.gender+"</div><div>"
                                    +pet.age+"</div><div>"
                                    +pet.breed+"</div><div>"
                                    +"Activity: "+pet.activity+"</div><div>"
                                    +"Kid-Friendly: "+pet.kids+"</div><div>"
                                    +"Shedding: "+pet.shedding+"</div><div>"
                                    +"Vaccinated: "+pet.vaccinations+"</div><div>"
                                    +"Spayed/Neutered: "+pet.neutered+"</div><div>"
                                    +"<input type='button' class='btn profile' id='go-to-profile-'"+pet.name.toLowerCase()+" value='Go To Profile'/></div></div></div>";
    add_pets+=add;
  }
  $("#pets").append(add_pets);


});
//----------end of document.ready-------------

var slideIndex_benjamin = 1;
var slideIndex_staples = 1;
var slideIndex_ping = 1;

var slides_benjamin = [$("#slide-benjamin-0"),$("#slide-benjamin-1"),$("#slide-benjamin-2"),$("#slide-benjamin-3"),$("#slide-benjamin-4")];
var slides_staples = [$("#slide-staples-0"),$("#slide-staples-1"),$("#slide-staples-2"),$("#slide-staples-3")];
var slides_ping = [$("#slide-ping-0"),$("#slide-ping-1"),$("#slide-ping-2"),$("#slide-ping-3")];

var dots_benjamin = [$("#dot-benjamin-0"),$("#dot-benjamin-1"),$("#dot-benjamin-2"),$("#dot-benjamin-3"),$("#dot-benjamin-4")];
var dots_staples = [$("#dot-staples-0"),$("#dot-staples-1"),$("#dot-staples-2"),$("#dot-staples-3")];
var dots_ping = [$("#dot-ping-0"),$("#dot-ping-1"),$("#dot-ping-2"),$("#dot-ping-3")];

showSlides(slideIndex_benjamin,'benjamin');
showSlides(slideIndex_staples,'staples');
showSlides(slideIndex_ping,'ping');

function plusSlides(pet,n) {
  console.log(pet);
  var pet_name = pet.name.toLowerCase();
  console.log(pet_name);
  if (name=='benjamin'){

    slideIndex_benjamin += n;
    showSlides(slideIndex_benjamin,'benjamin');}
  else if (name=='staples'){
    slideIndex_staples += n;
    showSlides(slideIndex_staples,'staples');}
  else if (name=='ping'){
    slideIndex_ping += n;
    showSlides(slideIndex_ping,'ping');}
}

function currentSlide(n,name) {
  showSlides(n,name);
}

function showSlides(n,name) {
  var i;
  var slides;
  if (name=='benjamin'){
    slides=slides_benjamin;
    dots=dots_benjamin;
  } else if (name=='staples'){
    slides=slides_staples;
    dots=dots_staples;
  } else if (name=='ping'){
    slides=slides_ping;
    dots=dots_ping;
  }

  if (n > slides.length) {
    if (name=='benjamin'){ slideIndex_benjamin = 1;}
    else if (name=='staples'){ slideIndex_staples = 1;}
    else if (name=='ping'){ slideIndex_ping = 1;}
  } else if (n < 1) {
    if (name=='benjamin'){ slideIndex_benjamin = slides.length;}
    else if (name=='staples'){ slideIndex_staples = slides.length;}
    else if (name=='ping'){ slideIndex_ping = slides.length;}
  }

  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }
  for (i = 0; i < dots.length; i++) {
      dots[i].className = dots[i].className.replace(" active", "");
  }

  if (name=='benjamin'){
    slides[slideIndex_benjamin-1].style.display = "block";
    dots[slideIndex_benjamin-1].className += " active";
  }
  else if (name=='staples'){
    slides[slideIndex_staples-1].style.display = "block";
    dots[slideIndex_staples-1].className += " active";
  }
  else if (name=='ping'){
    slides[slideIndex_ping-1].style.display = "block";
    dots[slideIndex_ping-1].className += " active";
  }
}

function close(name){
  pet_removed=name;
  var index = pet_show.indexOf(name);
  if (index > -1) {
    pet_show.splice(index, 1);
  }

  $('#pet-'+name).remove();
  $('#notification-text').html('You just removed '+name.charAt(0).toUpperCase()+name.slice(1)+' from your Favorites');
  $('#notification').css('visibility','visible');

  if (pet_show.length==0){
    var show_text = "<div id='empty-notification' class='empty'><div id='notification-text' class='search-text'><p>There arent any pets in your Favorites.</p><p>Would you like to add some now?</p></div><div class='wrapper'><input id='search' type='button' class='btn search' value='Go To Search Results'/></div></div>"
    $("#mainColumn").append(show_text);
    //$('#pets').remove();
  }
}


$(document).on('click',"#go-to-profile", function(evt){
  window.location.href = "";
})

$(document).on('click',"#close-benjamin", function(evt){
  close('benjamin');
})
$(document).on('click',"#close-staples", function(evt){
  close('staples');
})
$(document).on('click',"#close-ping", function(evt){
  close('ping');
})

$(document).on('click',"#close-notification", function(evt){
  $('#notification').css('visibility','hidden');
})

$(document).on('click',"#undo-remove", function(evt){
  var pet;
  for (var i=0; i< pet_dict.length; i++){
    if (pet_dict[i].name.toLowerCase()==pet_removed){
      pet=pet_dict[i];
    }
  }
  var add="<div id=pet-"+pet.name.toLowerCase()+" class='pet'><div><div>"+"<input id='close-"+pet.name.toLowerCase()+"' type='button' class='btn remove' value='X'/></div><div>"
                                  +"<img class='prof' src="+pet.prof+"></img></div><div>"
                                  +pet.name+"</div><div>"
                                  +pet.gender+"</div><div>"
                                  +pet.age+"</div><div>"
                                  +pet.breed+"</div><div>"
                                  +"Activity: "+pet.activity+"</div><div>"
                                  +"Kid-Friendly: "+pet.kids+"</div><div>"
                                  +"Shedding: "+pet.shedding+"</div><div>"
                                  +"Vaccinated: "+pet.vaccinations+"</div><div>"
                                  +"Spayed/Neutered: "+pet.neutered+"</div><div>"
                                  +"<input type='button' class='btn profile' id='go-to-profile-'"+pet.name.toLowerCase()+" value='Go To Profile'/></div></div></div>";
  $("#pets").append(add);
  pet_removed='';
  $('#notification').css('visibility','hidden');
  $('#empty-notification').remove();
  pet_show.push(pet.name.toLowerCase());
})



</script>
</head>

<body>
<div class="container">
</br>
  <div class="row">
    <h2 class="favorites-header">Favorites</h2>
  </div>
  <div class="row">
    scroll bar placeholder
  </div>
  <div class="row">
    <div class="col-md-3 vertical-center" id="firstColumn">
    </div>

    <div class="col-md-9 main" id="mainColumn">
      <div id="pets" class="pets">
      </div>
    </div>
  </div> <!-- class="row" -->
  <div id="notification" class="container notification">
    <input id='close-notification' type='button' class='btn remove' value='X'/>
    <div id="notification-text" class="notification-text"></div>
    <div class="wrapper"><input id='undo-remove' type='button' class='btn undo' value='Undo'/></div>
  </div>
</div> <!-- class="container" -->
</body>

</html>
